(this.webpackJsonpstreamlit_img_label=this.webpackJsonpstreamlit_img_label||[]).push([[0],{1:function(e,t,a){e.exports={dark:"StreamlitImgLabel_dark__PyW4C"}},19:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(5),o=a.n(c),i=a(3),s=a(2),d=a(1),l=a.n(d);var m=Object(i.b)(e=>{const[t,a]=Object(r.useState)("light"),[c,o]=Object(r.useState)(new s.fabric.Canvas("")),{canvasWidth:d,canvasHeight:m,imageData:g}=e.args,[h,b]=Object(r.useState)(0),[k,f]=Object(r.useState)(0),[u,p]=Object(r.useState)(0);var C=document.createElement("canvas"),v=C.getContext("2d");let w;if(C.width=d,C.height=m,v){var j=v.createImageData(d,m);j.data.set(g),v.putImageData(j,0,0),w=C.toDataURL()}else w="";Object(r.useEffect)(()=>{const e=new s.fabric.Canvas("c",{enableRetinaScaling:!1,backgroundImage:w,uniScaleTransform:!0});o(e),i.a.setFrameHeight()},[m,d,w]);const E=()=>{const e=c.getObjects().filter(e=>e.isType("rect")).map((e,t)=>({...e.getBoundingRect()})),t=c.getObjects().filter(e=>e.isType("circle")&&1===e.data).map((e,t)=>({...e.getCenterPoint(),label:1})),a=c.getObjects().filter(e=>e.isType("circle")&&0===e.data).map((e,t)=>({...e.getCenterPoint(),label:0}));i.a.setComponentValue({rects:e,points:t,negativePoints:a})};Object(r.useEffect)(()=>{if(!c)return;return c.on("object:modified",()=>{c.renderAll(),E()}),()=>{c.off("object:modified")}});const O=e=>{a(e),"dark"===e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return Object(r.useEffect)(()=>(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>O(e.matches?"dark":"light")),O(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",()=>{})}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("canvas",{id:"c",className:"dark"===t?l.a.dark:"",width:d,height:m}),n.a.createElement("div",{className:"dark"===t?l.a.dark:""},n.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{b(50===h?0:h+1);const t={left:.15*d+3*h,top:.15*m+3*h,width:.2*d,height:.2*m};c.add(new s.fabric.Rect({...t,fill:"",objectCaching:!0,stroke:e.args.boxColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1})),E()}},"\uc0c8\ub85c\uc6b4 \ubc15\uc2a4 \uc0dd\uc131"),n.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{f(50===k?0:k+1);const t={left:.15*d+3*k,top:.15*m+3*k,width:.01*d,height:.01*m};c.add(new s.fabric.Circle({...t,data:1,radius:t.width,fill:e.args.pointColor,objectCaching:!0,stroke:e.args.pointColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1})),E()}},"\uc0c8\ub85c\uc6b4 \ud3ec\uc778\ud2b8 \uc0dd\uc131"),n.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{p(50===u?0:u+1);const t={left:.15*d+3*u,top:.15*m+3*u,width:.01*d,height:.01*m};c.add(new s.fabric.Circle({...t,data:0,radius:t.width,fill:e.args.negativePointColor,objectCaching:!0,stroke:e.args.negativePointColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1})),E()}},"\uc0c8\ub85c\uc6b4 \ub124\uac70\ud2f0\ube0c \ud3ec\uc778\ud2b8 \uc0dd\uc131"),n.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{const e=c.getActiveObject();c.remove(e),E()}},"\uc120\ud0dd\ud55c \ubc15\uc2a4/\ud3ec\uc778\ud2b8 \uc81c\uac70"),n.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{b(0),f(0),p(0),c.getObjects().forEach(e=>c.remove(e)),E()}},"\ubaa8\ub4e0 \ubc15\uc2a4/\ud3ec\uc778\ud2b8 \uc81c\uac70")))});o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(m,null)),document.getElementById("root"))},7:function(e,t,a){e.exports=a(22)}},[[7,1,2]]]);
//# sourceMappingURL=main.8e887044.chunk.js.map
(this.webpackJsonpstreamlit_img_label=this.webpackJsonpstreamlit_img_label||[]).push([[0],{1:function(e,t,a){e.exports={dark:"StreamlitImgLabel_dark__PyW4C"}},19:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(5),o=a.n(n),i=a(3),s=a(2),d=a(1),l=a.n(d);var m=Object(i.b)(e=>{const[t,a]=Object(r.useState)("light"),[n,o]=Object(r.useState)(new s.fabric.Canvas("")),{canvasWidth:d,canvasHeight:m,imageData:h}=e.args,[g,b]=Object(r.useState)(0),[f,k]=Object(r.useState)(0);var u=document.createElement("canvas"),p=u.getContext("2d");let v;if(u.width=d,u.height=m,p){var w=p.createImageData(d,m);w.data.set(h),p.putImageData(w,0,0),v=u.toDataURL()}else v="";Object(r.useEffect)(()=>{const e=new s.fabric.Canvas("c",{enableRetinaScaling:!1,backgroundImage:v,uniScaleTransform:!0});o(e),i.a.setFrameHeight()},[m,d,v]);const E=()=>{const e=n.getObjects().filter(e=>e.isType("rect")).map((e,t)=>({...e.getBoundingRect()})),t=n.getObjects().filter(e=>e.isType("circle")).map((e,t)=>({...e.getCenterPoint()}));i.a.setComponentValue({rects:e,points:t})};Object(r.useEffect)(()=>{if(!n)return;return n.on("object:modified",()=>{n.renderAll(),E()}),()=>{n.off("object:modified")}});const j=e=>{a(e),"dark"===e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return Object(r.useEffect)(()=>(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>j(e.matches?"dark":"light")),j(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",()=>{})}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{id:"c",className:"dark"===t?l.a.dark:"",width:d,height:m}),c.a.createElement("div",{className:"dark"===t?l.a.dark:""},c.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{b(50===g?0:g+1);const t={left:.15*d+3*g,top:.15*m+3*g,width:.2*d,height:.2*m};n.add(new s.fabric.Rect({...t,fill:"",objectCaching:!0,stroke:e.args.boxColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1})),E()}},"\uc0c8\ub85c\uc6b4 \ubc15\uc2a4 \uc0dd\uc131"),c.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{k(50===f?0:f+1);const t={left:.15*d+3*f,top:.15*m+3*f,width:.01*d,height:.01*m};n.add(new s.fabric.Circle({...t,radius:t.width,fill:e.args.pointColor,objectCaching:!0,stroke:e.args.pointColor,strokeWidth:1,strokeUniform:!0,hasRotatingPoint:!1})),E()}},"\uc0c8\ub85c\uc6b4 \ud3ec\uc778\ud2b8 \uc0dd\uc131"),c.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{const e=n.getActiveObject();n.remove(e),E()}},"\uc120\ud0dd\ud55c \ubc15\uc2a4/\ud3ec\uc778\ud2b8 \uc81c\uac70"),c.a.createElement("button",{className:"dark"===t?l.a.dark:"",onClick:()=>{b(0),k(0),n.getObjects().forEach(e=>n.remove(e)),E()}},"\ubaa8\ub4e0 \ubc15\uc2a4/\ud3ec\uc778\ud2b8 \uc81c\uac70")))});o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m,null)),document.getElementById("root"))},7:function(e,t,a){e.exports=a(22)}},[[7,1,2]]]);
//# sourceMappingURL=main.2ff00d2b.chunk.js.map